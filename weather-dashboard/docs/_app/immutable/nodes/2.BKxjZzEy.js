import{t as y,a as _,c as ee}from"../chunks/Cw_YfwF7.js";import{a7 as Q,a8 as Y,a9 as ce,y as ue,i as j,at as ve,au as fe,av as _e,aw as de,Q as me,an as ge,p as O,c as h,s as g,a as V,r as u,t as T,f as M,g as n,aq as C,W as X,N as he,V as d,as as ye}from"../chunks/Bhr7MAlT.js";import{d as D,s as F}from"../chunks/C9A5emVc.js";import{p as te,i as I}from"../chunks/DOaowZEY.js";import{e as q,i as B}from"../chunks/CLEHgVJG.js";let Z=!1;function ae(){Z||(Z=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const a of e.target.elements)(t=a.__on_r)==null||t.call(a)})},{capture:!0}))}function pe(e){var t=ce,a=ue;Q(null),Y(null);try{return e()}finally{Q(t),Y(a)}}function xe(e,t,a,o=a){e.addEventListener(t,()=>pe(a));const r=e.__on_r;r?e.__on_r=()=>{r(),o(!0)}:e.__on_r=()=>o(!0),ae()}const be=Symbol("is custom element"),ke=Symbol("is html");function we(e){if(j){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var o=e.value;$(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var r=e.checked;$(e,"checked",null),e.checked=r}}};e.__on_r=a,ve(a),ae()}}function $(e,t,a,o){var r=Se(e);j&&(r[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||r[t]!==(r[t]=a)&&(t==="loading"&&(e[fe]=a),e.removeAttribute(t))}function Se(e){return e.__attributes??(e.__attributes={[be]:e.nodeName.includes("-"),[ke]:e.namespaceURI===_e})}function Fe(e,t,a=t){var o=de();xe(e,"input",r=>{var l=r?e.defaultValue:e.value;if(l=R(e)?W(l):l,a(l),o&&l!==(l=t())){var c=e.selectionStart,i=e.selectionEnd;e.value=l??"",i!==null&&(e.selectionStart=c,e.selectionEnd=Math.min(i,e.value.length))}}),(j&&e.defaultValue!==e.value||me(t)==null&&e.value)&&a(R(e)?W(e.value):e.value),ge(()=>{var r=t();R(e)&&r===W(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function R(e){var t=e.type;return t==="number"||t==="range"}function W(e){return e===""?null:+e}var Ae=(e,t)=>t.updateCity(e.target.value),Ee=(e,t)=>e.key==="Enter"&&t.search(),Le=y('<div><input placeholder="Stadt eingeben"> <button>Suchen</button></div>');function Ce(e,t){O(t,!0);let a=te(t,"city",7);var o=Le(),r=h(o);we(r),r.__input=[Ae,t],r.__keydown=[Ee,t];var l=g(r,2);l.__click=function(...c){var i;(i=t.search)==null||i.apply(this,c)},u(o),Fe(r,a),_(e,o),V()}D(["input","keydown","click"]);var Ne=y("<div><p>ðŸŒ¡ Temperatur in <strong> </strong> </p> <button> </button> <span> </span></div>");function Ie(e,t){var a=Ne(),o=h(a),r=g(h(o)),l=h(r,!0);u(r);var c=g(r);u(o);var i=g(o,2);i.__click=function(...b){var m;(m=t.toggleFavorite)==null||m.apply(this,b)};var x=h(i,!0);u(i);var p=g(i,2),A=h(p,!0);u(p),u(a),T(()=>{F(l,t.city),F(c,`: ${t.temperature??""}Â°C`),F(x,t.isFavorite?"Favorit entfernen":"Als Favorit speichern"),F(A,t.icon)}),_(e,a)}D(["click"]);var Te=y("<li> </li>"),Me=y("<h2>3-Tage-Vorhersage</h2> <ul></ul>",1),Oe=y("<p>Keine Vorhersage verfÃ¼gbar.</p>");function Ve(e,t){O(t,!0);var a=ee(),o=M(a);{var r=c=>{var i=Me(),x=g(M(i),2);q(x,21,()=>t.forecast.days,B,(p,A,b)=>{var m=Te(),S=h(m);u(m),T(E=>F(S,`${E??""}:
        ${t.forecast.min[b]??""}Â° â€“ ${t.forecast.max[b]??""}Â°C,
        Regen ${t.forecast.rain[b]??""} mm`),[()=>new Date(n(A)).toLocaleDateString("de-DE",{weekday:"short"})]),_(p,m)}),u(x),_(c,i)},l=c=>{var i=Oe();_(c,i)};I(o,c=>{t.forecast?c(r):c(l,!1)})}_(e,a),V()}var De=(e,t,a)=>t.selectCity(n(a)),Ke=y('<li><button class="w-full text-left bg-white/70 backdrop-blur-sm rounded-lg px-4 py-2 hover:bg-white transition"> </button></li>'),Pe=y('<h2 class="mt-6 text-xl font-semibold text-indigo-800">Favoriten</h2> <ul class="grid grid-cols-1 sm:grid-cols-2 gap-2 mt-2"></ul>',1),Re=y('<p class="mt-4 italic text-gray-500">Keine Favoriten gespeichert.</p>');function We(e,t){O(t,!0);let a=te(t,"favorites",19,()=>[]);var o=ee(),r=M(o);{var l=i=>{var x=Pe(),p=g(M(x),2);q(p,21,a,B,(A,b)=>{var m=Ke(),S=h(m);S.__click=[De,t,b];var E=h(S,!0);u(S),u(m),T(()=>F(E,n(b))),_(A,m)}),u(p),_(i,x)},c=i=>{var x=Re();_(i,x)};I(r,i=>{a().length>0?i(l):i(c,!1)})}_(e,o),V()}D(["click"]);var je=y('<p class="text-red-600 text-center"> </p>'),qe=(e,t,a)=>t(n(a)),Be=y('<li><button class="w-full text-left bg-white/60 px-4 py-2 rounded-full hover:bg-white transition"> </button></li>'),He=y('<h2 class="text-xl font-semibold text-white">In deiner NÃ¤he</h2> <ul class="space-y-2"></ul>',1),Je=y('<p class="text-white/80 italic text-center">Keine Favoriten gespeichert.</p>'),Ue=y('<main class="space-y-6"><h1 class="text-3xl font-bold text-center text-white">Wetter App</h1> <!> <!> <!> <!> <!></main>');function Ze(e,t){O(t,!0);let a=C(""),o=C(null),r=C(null),l=C(""),c=C(""),i=C(X([])),x=ye(()=>n(i).includes(n(a))),p=C(X([]));he(()=>{const s=localStorage.getItem("favorites");s?d(i,JSON.parse(s),!0):navigator.geolocation&&navigator.geolocation.getCurrentPosition(async v=>{var w;const{latitude:L,longitude:N}=v.coords,f=await fetch(`https://geocoding-api.open-meteo.com/v1/search?latitude=${L}&longitude=${N}&count=5`).then(k=>k.json());d(p,((w=f.results)==null?void 0:w.map(k=>k.name))??[],!0)},()=>{d(p,[],!0)})});function A(s){d(a,s,!0)}function b(){let s=n(i).includes(n(a))?n(i).filter(v=>v!==n(a)):[...n(i),n(a)];d(i,s,!0),localStorage.setItem("favorites",JSON.stringify(n(i)))}async function m(){var s;d(c,""),d(o,null),d(r,null),d(l,"");try{const v=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${n(a)}&count=1`).then(k=>k.json());if(!((s=v.results)!=null&&s.length))throw"Ort nicht gefunden";const{latitude:L,longitude:N}=v.results[0],f=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${L}&longitude=${N}&current=temperature_2m&daily=temperature_2m_max,temperature_2m_min,precipitation_sum&timezone=auto`).then(k=>k.json());d(o,f.current.temperature_2m,!0),d(r,{days:f.daily.time.slice(1,4),max:f.daily.temperature_2m_max.slice(1,4),min:f.daily.temperature_2m_min.slice(1,4),rain:f.daily.precipitation_sum.slice(1,4)},!0);const w=f.daily.precipitation_sum[0];d(l,w>0?"ðŸŒ§ï¸":"â˜€ï¸",!0)}catch(v){d(c,typeof v=="string"?v:"Fehler beim Abrufen",!0)}}function S(s){d(a,s,!0),m()}var E=Ue(),H=g(h(E),2);Ce(H,{get city(){return n(a)},updateCity:A,search:m});var J=g(H,2);{var re=s=>{var v=je(),L=h(v,!0);u(v),T(()=>F(L,n(c))),_(s,v)};I(J,s=>{n(c)&&s(re)})}var U=g(J,2);Ie(U,{get city(){return n(a)},get temperature(){return n(o)},get icon(){return n(l)},get isFavorite(){return n(x)},toggleFavorite:b});var z=g(U,2);Ve(z,{get forecast(){return n(r)}});var ie=g(z,2);{var ne=s=>{We(s,{get favorites(){return n(i)},selectCity:S})},oe=(s,v)=>{{var L=f=>{var w=He(),k=g(M(w),2);q(k,21,()=>n(p),B,(se,G)=>{var K=Be(),P=h(K);P.__click=[qe,S,G];var le=h(P,!0);u(P),u(K),T(()=>F(le,n(G))),_(se,K)}),u(k),_(f,w)},N=f=>{var w=Je();_(f,w)};I(s,f=>{n(p).length>0?f(L):f(N,!1)},v)}};I(ie,s=>{n(i).length>0?s(ne):s(oe,!1)})}u(E),_(e,E),V()}D(["click"]);export{Ze as component};
