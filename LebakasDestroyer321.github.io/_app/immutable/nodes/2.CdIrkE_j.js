import{t as y,a as f,c as J}from"../chunks/0Jqmp9wR.js";import{i as Z,am as ot,an as nt,ao as st,p as W,c,s as v,t as P,a as q,r as s,f as R,g as a,ap as T,_ as Y,N as lt,$ as m,aq as ct}from"../chunks/Goi1unzq.js";import{d as B,s as F}from"../chunks/CiZ_yPW3.js";import{p as K,i as j}from"../chunks/CVVPJFay.js";import{e as U,i as z}from"../chunks/Ker7_yx2.js";let Q=!1;function ut(){Q||(Q=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}const dt=Symbol("is custom element"),vt=Symbol("is html");function ft(e){if(Z){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var l=e.value;X(e,"value",null),e.value=l}if(e.hasAttribute("checked")){var n=e.checked;X(e,"checked",null),e.checked=n}}};e.__on_r=r,ot(r),ut()}}function gt(e,t){var r=$(e);r.value===(r.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function X(e,t,r,l){var n=$(e);Z&&(n[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||n[t]!==(n[t]=r)&&(t==="loading"&&(e[st]=r),e.removeAttribute(t))}function $(e){return e.__attributes??(e.__attributes={[dt]:e.nodeName.includes("-"),[vt]:e.namespaceURI===nt})}var mt=(e,t)=>t.updateCity(e.target.value),_t=y('<div class="flex gap-3"><input class="flex-grow border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-300" placeholder="Stadt eingeben"> <button class="bg-indigo-600 text-white rounded-lg px-4 py-2 hover:bg-indigo-700 transition">Suchen</button></div>');function pt(e,t){W(t,!0);let r=K(t,"city",3,"");var l=_t(),n=c(l);ft(n),n.__input=[mt,t];var b=v(n,2);b.__click=function(...g){var i;(i=t.search)==null||i.apply(this,g)},s(l),P(()=>gt(n,r())),f(e,l),q()}B(["input","click"]);var ht=y('<div class="bg-white/70 backdrop-blur-sm rounded-2xl p-4 shadow-md grid grid-cols-1 sm:grid-cols-2 gap-4 items-center"><div><p class="text-sm text-gray-600">Temperatur in</p> <p class="text-2xl font-bold"> </p> <p class="text-5xl font-extrabold text-indigo-700"> </p></div> <div class="flex justify-center sm:justify-end items-center text-6xl"> </div> <button class="sm:col-span-2 mx-auto bg-indigo-600 text-white rounded-full px-6 py-2 hover:bg-indigo-700 transition"> </button></div>');function xt(e,t){let r=K(t,"city",3,""),l=K(t,"icon",3,"");var n=J(),b=R(n);{var g=i=>{var _=ht(),p=c(_),A=v(c(p),2),k=c(A,!0);s(A);var h=v(A,2),x=c(h);s(h),s(p);var w=v(p,2),L=c(w,!0);s(w);var C=v(w,2);C.__click=function(...M){var I;(I=t.toggleFavorite)==null||I.apply(this,M)};var O=c(C,!0);s(C),s(_),P(()=>{F(k,r()),F(x,`${t.temperature??""}°C`),F(L,l()),F(O,t.isFavorite?"➖ Favorit entfernen":"➕ Als Favorit speichern")}),f(i,_)};j(b,i=>{t.temperature!==null&&i(g)})}f(e,n)}B(["click"]);var yt=y('<div class="bg-white/70 backdrop-blur-sm rounded-2xl p-4 text-center shadow-sm"><p class="font-medium text-indigo-700"> </p> <p class="mt-1"> </p> <p class="text-sm text-gray-600 mt-1"> </p></div>'),bt=y('<h2 class="mt-6 text-xl font-semibold text-indigo-800">3-Tage-Vorhersage</h2> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-2"></div>',1);function wt(e,t){W(t,!0);let r=K(t,"forecast",3,null);var l=J(),n=R(l);{var b=g=>{var i=bt(),_=v(R(i),2);U(_,21,()=>r().days,z,(p,A,k)=>{var h=yt(),x=c(h),w=c(x,!0);s(x);var L=v(x,2),C=c(L);s(L);var O=v(L,2),M=c(O);s(O),s(h),P(I=>{F(w,I),F(C,`${r().min[k]??""}° – ${r().max[k]??""}°`),F(M,`🌧 ${r().rain[k]??""} mm`)},[()=>new Date(a(A)).toLocaleDateString("de-DE",{weekday:"short"})]),f(p,h)}),s(_),f(g,i)};j(n,g=>{r()&&g(b)})}f(e,l),q()}var kt=(e,t,r)=>t.selectCity(a(r)),St=y('<li><button class="w-full text-left bg-white/70 backdrop-blur-sm rounded-lg px-4 py-2 hover:bg-white transition"> </button></li>'),Ft=y('<h2 class="mt-6 text-xl font-semibold text-indigo-800">Favoriten</h2> <ul class="grid grid-cols-1 sm:grid-cols-2 gap-2 mt-2"></ul>',1),At=y('<p class="mt-4 italic text-gray-500">Keine Favoriten gespeichert.</p>');function Nt(e,t){W(t,!0);let r=K(t,"favorites",19,()=>[]);var l=J(),n=R(l);{var b=i=>{var _=Ft(),p=v(R(_),2);U(p,21,r,z,(A,k)=>{var h=St(),x=c(h);x.__click=[kt,t,k];var w=c(x,!0);s(x),s(h),P(()=>F(w,a(k))),f(A,h)}),s(p),f(i,_)},g=i=>{var _=At();f(i,_)};j(n,i=>{r().length>0?i(b):i(g,!1)})}f(e,l),q()}B(["click"]);var Lt=y('<p class="text-red-600 text-center"> </p>'),Ct=(e,t,r)=>t(a(r)),It=y('<li><button class="w-full text-left bg-white/60 px-4 py-2 rounded-full hover:bg-white transition"> </button></li>'),Et=y('<h2 class="text-xl font-semibold text-white">In deiner Nähe</h2> <ul class="space-y-2"></ul>',1),Tt=y('<p class="text-white/80 italic text-center">Keine Favoriten gespeichert.</p>'),Ot=y('<main class="space-y-6"><h1 class="text-3xl font-bold text-center text-white">Wetter App</h1> <!> <!> <!> <!> <!></main>');function Kt(e,t){W(t,!0);let r=T(""),l=T(null),n=T(null),b=T(""),g=T(""),i=T(Y([])),_=ct(()=>a(i).includes(a(r))),p=T(Y([]));lt(()=>{const o=localStorage.getItem("favorites");o?m(i,JSON.parse(o),!0):navigator.geolocation&&navigator.geolocation.getCurrentPosition(async u=>{var N;const{latitude:E,longitude:D}=u.coords,d=await fetch(`https://geocoding-api.open-meteo.com/v1/search?latitude=${E}&longitude=${D}&count=5`).then(S=>S.json());m(p,((N=d.results)==null?void 0:N.map(S=>S.name))??[],!0)},()=>{m(p,[],!0)})});function A(o){m(r,o,!0)}function k(){let o=a(i).includes(a(r))?a(i).filter(u=>u!==a(r)):[...a(i),a(r)];m(i,o,!0),localStorage.setItem("favorites",JSON.stringify(a(i)))}async function h(){var o;m(g,""),m(l,null),m(n,null),m(b,"");try{const u=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${a(r)}&count=1`).then(S=>S.json());if(!((o=u.results)!=null&&o.length))throw"Ort nicht gefunden";const{latitude:E,longitude:D}=u.results[0],d=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${E}&longitude=${D}&current=temperature_2m&daily=temperature_2m_max,temperature_2m_min,precipitation_sum&timezone=auto`).then(S=>S.json());m(l,d.current.temperature_2m,!0),m(n,{days:d.daily.time.slice(1,4),max:d.daily.temperature_2m_max.slice(1,4),min:d.daily.temperature_2m_min.slice(1,4),rain:d.daily.precipitation_sum.slice(1,4)},!0);const N=d.daily.precipitation_sum[0];m(b,N>0?"🌧️":"☀️",!0)}catch(u){m(g,typeof u=="string"?u:"Fehler beim Abrufen",!0)}}function x(o){m(r,o,!0),h()}var w=Ot(),L=v(c(w),2);pt(L,{get city(){return a(r)},updateCity:A,search:h});var C=v(L,2);{var O=o=>{var u=Lt(),E=c(u,!0);s(u),P(()=>F(E,a(g))),f(o,u)};j(C,o=>{a(g)&&o(O)})}var M=v(C,2);xt(M,{get city(){return a(r)},get temperature(){return a(l)},get icon(){return a(b)},get isFavorite(){return a(_)},toggleFavorite:k});var I=v(M,2);wt(I,{get forecast(){return a(n)}});var tt=v(I,2);{var et=o=>{Nt(o,{get favorites(){return a(i)},selectCity:x})},rt=(o,u)=>{{var E=d=>{var N=Et(),S=v(R(N),2);U(S,21,()=>a(p),z,(at,V)=>{var G=It(),H=c(G);H.__click=[Ct,x,V];var it=c(H,!0);s(H),s(G),P(()=>F(it,a(V))),f(at,G)}),s(S),f(d,N)},D=d=>{var N=Tt();f(d,N)};j(o,d=>{a(p).length>0?d(E):d(D,!1)},u)}};j(tt,o=>{a(i).length>0?o(et):o(rt,!1)})}s(w),f(e,w),q()}B(["click"]);export{Kt as component};
